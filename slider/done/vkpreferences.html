<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>cr0w | VKPreferences</title>
<link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="bootstrap/css/font-awesome.css">
<link rel = "stylesheet" href = "style.css">
<script src="js/jquery-3.2.1.js"></script>
<script type="text/javascript" src="js/js.cookie.js"></script>
<script type="text/javascript">
$(function () {

  $.post("index.php",{ApiName: "AuthCookie", Page: "vkpreferences"},onAjaxSuccessed);
  $('#slideBlock').attr('style','margin-top:10px;');
  //$('#pan1').attr('style','display:none;');
  //$('#pan2').attr('style','display:none;');
  //$('#showHideContent').attr('style','border-radius: 5px 5px 5px 5px;background-color:#5b8bde;margin-top:10px;');
});


function onAjaxSuccessed(data)
{
  if (data=="OK")
  {
    $('#lPButton').remove();
    $('#registerButton').remove();
    $('#enterButton').remove();
    var cookie = $.cookie("Cr0WArea");
    var login = cookie.split(":")[0];
    $('#cabinetButt').html('<span class="glyphicon glyphicon-briefcase"></span> Личный кабинет ('+login+')');
  }
  else
  {
    $('#exitButton').remove();
    $('#myCabButton').remove();
  }
}
</script>
<link rel="shortcut icon" type="image/x-icon" href="https://cr0w.pw/images/favicon.ico"/>
</head>
<body>
  <!-- Modal registration -->
  <div class="modal fade" id="reg_Modal" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header" style="padding:0px 0px;background-color:#f2f2f2;text-align:center">
          <button type="button" class="close" data-dismiss="modal">x</button>
          <h4>Регистрация</h4>
        </div>
        <div class="modal-body" style="padding:0px 0px;">
          <form role="form" action="/php/register.php" method="post">
            <div class="form-group">
              <label for="usrname" style="margin-left:25px;"><span class="glyphicon glyphicon-user"></span> Логин</label>
              <input type="text" class="form-control" id="reg_Login" placeholder="Введите логин">
            </div>
             <div class="form-group" style="margin-top:-10px;">
              <label for="email" style="margin-left:25px;"><span class="glyphicon glyphicon-envelope"></span> Email</label>
              <input type="email" class="form-control" id="reg_Email" placeholder="Введите email">
            </div>
            <div class="form-group" style="margin-top:-10px;">
              <label for="psw1" style="margin-left:25px;"><span class="glyphicon glyphicon-eye-open"></span> Пароль</label>
              <input type="password" class="form-control" id="reg_Password" placeholder="Ввведите пароль">
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button reset" class="btn btn-danger width-100" style="float:left;" data-dismiss="modal">
            <span class="glyphicon glyphicon-remove"></span> Отмена</button>
          <button type="submit" id="regButt" class="btn btn-success width-200" style="float:right;">
            <span class="glyphicon glyphicon-off"></span> Зарегистрироваться</button>
        </div>
      </div>

    </div>
  </div>
  <!-- Modal login -->
  <div class="modal fade" id="log_Modal" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header" style="padding:0px 0px;background-color:#f2f2f2;text-align:center">
          <button type="button" class="close" data-dismiss="modal">x</button>
          <h4><span class="glyphicon glyphicon-log-in"></span> Авторизация</h4>
        </div>
        <div class="modal-body" style="padding:0px 0px;">
          <form role="form" action="javascript:void(0);" method="post">
            <div class="form-group">
              <label for="usrname" style="margin-left:25px;"><span class="glyphicon glyphicon-user"></span> Логин</label>
              <input type="text" class="form-control" id="authlogin" placeholder="Логин">
            </div>
            <div class="form-group" style="margin-top:-10px;">
              <label for="psw1" style="margin-left:25px;"><span class="glyphicon glyphicon-eye-open"></span> Пароль</label>
              <input type="password" class="form-control" id="authpass" placeholder="Пароль">
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button reset" class="btn btn-danger width-100" style="float:left;" data-dismiss="modal">
            <span class="glyphicon glyphicon-remove"></span> Отмена</button>
          <button type="submit" id="loginBtn" class="btn btn-success width-200" style="float:right;">
            <span class="glyphicon glyphicon-off"></span> Вход</button>
        </div>
      </div>

    </div>
  </div>
  <!-- Modal lost password -->
  <div class="modal fade" id="lPass_Modal" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header" style="padding:0px 0px;background-color:#f2f2f2;text-align:center">
          <button type="button" class="close" data-dismiss="modal">x</button>
          <h4><span class="glyphicon glyphicon-lock"></span> Забыли пароль?</h4>
        </div>
        <div class="modal-body" style="padding:0px 0px;">
          <form role="form" action="javascript:void(0);" method="post">
             <div class="form-group">
              <label for="email" style="margin-left:25px;"><span class="glyphicon glyphicon-envelope"></span> Email</label>
              <input type="email" class="form-control" id="lp_Email" placeholder="Введите email">
            </div>
            <div class="form-group" id="secKeyForm" style="margin-top:-10px; display:none;">
              <label for="psw1" style="margin-left:25px;"><span class="glyphicon glyphicon-eye-open"></span> Secret key</label>
              <input type="text" class="form-control" id="lp_sKey" placeholder="Secret key">
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button reset" id="reSend" class="btn btn-danger width-100" style="float:left; display:none;">Повторить</button>
          <button type="submit" id="lPassButton" class="btn btn-success width-200" style="float:right;">Восстановить</button>
        </div>
      </div>

    </div>
  </div>

  <!-- Modal sceenshots -->
  <div class="modal fade" id="screens_Modal" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header" style="padding:0px 0px;background-color:#f2f2f2;text-align:center">
          <button type="button" class="close" data-dismiss="modal">x</button>
          <h4>Описание</h4>
        </div>
        <div class="modal-body" style="padding:0px 0px;">

        </div>
        <div class="modal-footer">
          <button type="button reset" class="btn btn-danger width-100" data-dismiss="modal">Закрыть</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Nav Bar -->
  <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a href="https://cr0w.pw" class="navbar-brand">
          <img height="42" src="https://cr0w.pw/images/logoCr0w.png" style="margin-top:-12px;"/>
        </a>
      </div>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li>
            <a href="https://cr0w.pw"><span class="glyphicon glyphicon-home"></span> Главная</a>
          </li>
          <li>
            <a href="/apps.cw"><span class="glyphicon glyphicon-th-large"></span> Приложения</a>
          </li>
          <li style="font-size:13px;">
            <a href="/about.cw"><span class="glyphicon glyphicon-info-sign"></span> О Cr0w</a>
          </li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li id="enterButton">
            <a href="#" id="logButtonA"><span class="glyphicon glyphicon-log-in"></span> Вход</a>
          </li>
          <li id="registerButton">
            <a href="#" id="regButtonA"><span class="glyphicon glyphicon-user"></span> Регистрация</a>
          </li>
          <li id="lPButton">
            <a href="#" id="lPassButtonA"><span class="glyphicon glyphicon-lock"></span> Забыли пароль?</a>
          </li>
          <li id="myCabButton">
            <a href="/myCabinet.cw" id="cabinetButt"><span class="glyphicon glyphicon-briefcase"></span> Личный кабинет</a>
          </li>
          <li id="exitButton">
            <a href="#"><span class="glyphicon glyphicon-log-out"></span> Выход</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <!-- Body -->
  <div id="headerwrap-app">
    <div class="container-fluid">
      <div class="row">
          <div class="row application-box vk-bg">
            <img class="page-application-icon" src="images/vk-icon.jpg">
          </div>
        </div>
        </div>
        <div class="container">
          <div class="row">
          <div class="col-sm-12 col-md-12 col-lg-12">
          <div id="panesVKTabs">
            <ul class="nav nav-pills">
              <li class="active">
                <a href="#pan1" data-toggle="tab">VKPreferences</a>
              </li>
              <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#">Больше <span class="caret"></span></a>
                <ul class="dropdown-menu">
                  <li><a href="#pan2" data-toggle="tab">Описание</a></li>
                  <li><a href="#pan3" data-toggle="tab">Возможности</a></li>
                </ul>
              </li>
            </ul>
            <div class="tab-content clearfix">
            <div class="tab-pane active" id="pan1">
                <div class="page-application-name">VKHD + VKPreferences</div>
                <div class="page-application-author">Разработчик: <a href="https://vk.com/orlov_alexender" style="text-decoration:none;color:#68aaf1;">Александр Орлов</a></div>
                <div class="page-application-version">
                  Версия приложения: <b>2.0.2</b><br />
                  Версия VKPreferences: <b>2.1.1</b>
                </div>
            </div>
              <div class="tab-pane fade" id="pan2">
                VKPreferences – это дополненная версия приложения VKHD для iPad. <br />
                Твик-клиент в значительной степени способен расширить стандартный инструментарий ВКонтакте, и дать пользователю те возможности, которых у него не было ранее. <br />
                Главным преимуществом VKPreferences является открытие доступа к аудиозаписям профиля, а также использованию режима невидимки и ряда других полезных дополнений, о которых вы ранее лишь мечтали.
                В режиме невидимости, или по другому – оффлайне, размещено несколько настроек: «Оффлайн», «Не читать входящие сообщения» и «Отключить уведомление о наборе текста».
              </div>
              <div class="tab-pane fade" id="pan3">
                <p></p>
                <li>Добавляет 3 свича в боковое меню (Оффлайн, Не читать сообщения, Скрыть набор текста).</li>
                <li>Возможность установки пароля на приложение (4-х значного или Touch ID).</li>
                <li>Удаляет всю рекламу из приложения VK для iPad.</li>
                <li>Возможность смены аккаунтов.</li>
                <li>Возвращает раздел "Аудиозаписи" и ручное(!) кэширование песен.</li>
                <li>Открывает "Запрещенный контент" (Группы, пользователи).</li>
                <li>Частично (!)выключает "Безопасный поиск видео".</li>
                <li>Полная поддержка iOS 8-10.</li>
                <li>Ручное и автоматическое кэширование.</li>
                <li>Убрано из левого меню вкладка "Помощь".</li>
                <li>Добавлено предупреждение о переходе в онлайн (да, нет).</li>
                <li>[iOS 9] вручную исправлены имена свичей (Offline и т.д.)</li>
                <li>Исправлена иконка на старых устройствах (iPad 1/2, Mini 1).</li>
                <p></p>
              </div>
            </div>
            <a href="#" style="text-decoration:none;">
              <div class="cont-butt" style="background-color: #42ca52;">
                <b>Установить</b>
              </div>
            </a>
          </div>
        </div>
        </div>
        <div class="container">
          <div class="row">
      <div class="center-block col-sm-12 col-md-7 col-lg-6" style="margin-top:10px;float:none;">
        <div style="padding:10px 10px;">
        <div class="row application-box slider-block">
          <div id="slides">
            <img src="https://cr0w.pw/images/screen/vkp/vkp-screen-1.png">
            <img src="https://cr0w.pw/images/screen/vkp/vkp-screen-2.png">
            <img src="https://cr0w.pw/images/screen/vkp/vkp-screen-3.png">
            <a href="#" class="slidesjs-previous slidesjs-navigation"><i class="fa fa-chevron-left" aria-hidden="true"></i></a>
            <a href="#" class="slidesjs-next slidesjs-navigation"><i class="fa fa-chevron-right" aria-hidden="true"></i></a>
          </div>
        </div>
      </div>
    </div>
    </div>
  </div>
</div>
      <!--
      <div class="container">
        <div class="row">
          <div class="col-sm-12 col-md-12 col-lg-12">
            <div class="row application-box" style="border-radius: 5px 5px 5px 5px;">
              <div class="page-application-name" style="border: 1px solid rgba(0, 0, 0, 0.1);">VKHD + VKPreferences</div>
              <div class="page-application-author" style="border: 1px solid rgba(0, 0, 0, 0.1);border-top:0;border-bottom:0;">Разработчик: <a href="https://vk.com/orlov_alexender" style="text-decoration:none;">Александр Орлов</a></div>
              <div class="page-application-version" style="border: 1px solid rgba(0, 0, 0, 0.1);">
                Версия приложения: <b>2.0.2</b><br />
                Версия VKPreferences: <b>2.1.1</b>
              </div>
              <a href="#" style="text-decoration:none;">
                <div class="cont-butt">
                  <b>Установить</b>
                </div>
              </a>
            </div>
          </div>
          </div>
        </div>
      -->
    </div>

  <!-- old style
  <div id="headerwrap">
    <div class="apps container">
      <div class="row">
            <div class="col-sm-5 col-md-5 col-lg-3">
            <div class="row application-box vk-bg">
              <img class="page-application-icon" src="images/vk-icon.jpg">
            </div>
            <div class="row application-box" style="border-radius: 5px 5px 5px 5px;">
              <div class="page-application-name" style="border: 1px solid rgba(0, 0, 0, 0.1);">VKHD + VKPreferences</div>
              <div class="page-application-author" style="border: 1px solid rgba(0, 0, 0, 0.1);border-top:0;border-bottom:0;">Разработчик: <a href="https://vk.com/orlov_alexender" style="text-decoration:none;">Александр Орлов</a></div>
              <div class="page-application-version" style="border: 1px solid rgba(0, 0, 0, 0.1);">
                Версия приложения: <b>2.0.2</b><br />
                Версия VKPreferences: <b>2.1.1</b>
              </div>
              <a href="#" style="text-decoration:none;">
                <div class="cont-butt">
                  <b>Установить</b>
                </div>
              </a>
            </div>
            </div>
            <div class="col-sm-7 col-md-7 col-lg-5">
              <div class="row application-box" style="border-radius: 5px 5px 5px 5px;">
                <div class="page-application-desc-tabs col-xs-12 col-md-12 col-lg-12">
                  <ul class="nav nav-tabs">
                    <li class="active" id="pan1">
                      <a data-toggle="tab" href="#panel1">Описание</a>
                    </li>
                    <li id="pan2">
                      <a data-toggle="tab" href="#panel2">Возможности</a>
                    </li>
                  </ul>
                  <div class="tab-content" id="descBox">
                    <div id="panel1" class="tab-pane fade in active">
                      <p>
                        VKPreferences – это дополненная версия приложения VKHD для iPad. <br />
                        Твик-клиент в значительной степени способен расширить стандартный инструментарий ВКонтакте, и дать пользователю те возможности, которых у него не было ранее. <br />
                        Главным преимуществом VKPreferences является открытие доступа к аудиозаписям профиля, а также использованию режима невидимки и ряда других полезных дополнений, о которых вы ранее лишь мечтали.
                        В режиме невидимости, или по другому – оффлайне, размещено несколько настроек: «Оффлайн», «Не читать входящие сообщения» и «Отключить уведомление о наборе текста».
                      </p>
                    </div>
                    <div id="panel2" class="tab-pane fade">
                      <p></p>
                      <li>Добавляет 3 свича в боковое меню (Оффлайн, Не читать сообщения, Скрыть набор текста).</li>
                      <li>Возможность установки пароля на приложение (4-х значного или Touch ID).</li>
                      <li>Удаляет всю рекламу из приложения VK для iPad.</li>
                      <li>Возможность смены аккаунтов.</li>
                      <li>Возвращает раздел "Аудиозаписи" и ручное(!) кэширование песен.</li>
                      <li>Открывает "Запрещенный контент" (Группы, пользователи).</li>
                      <li>Частично (!)выключает "Безопасный поиск видео".</li>
                      <li>Полная поддержка iOS 8-10.</li>
                      <li>Ручное и автоматическое кэширование.</li>
                      <li>Убрано из левого меню вкладка "Помощь".</li>
                      <li>Добавлено предупреждение о переходе в онлайн (да, нет).</li>
                      <li>[iOS 9] вручную исправлены имена свичей (Offline и т.д.)</li>
                      <li>Исправлена иконка на старых устройствах (iPad 1/2, Mini 1).</li>
                      <p></p>
                    </div>
                  </div>
                  <a href="#" style="text-decoration:none;">
                    <div class="cont-butt" style="background-color:#5b8bde;" id="showHideContent">
                      <b id="nameDescButton">Показать описание</b>
                    </div>
                  </a>
                </div>
              </div>
            </div>
        <div class="col-sm-7 col-md-7 col-lg-4">
          <div class="row application-box slider-block">
            <div id="slides">
              <img src="https://cr0w.pw/images/screen/vkp/vkp-screen-1.png">
              <img src="https://cr0w.pw/images/screen/vkp/vkp-screen-2.png">
              <img src="https://cr0w.pw/images/screen/vkp/vkp-screen-3.png">
              <a href="#" class="slidesjs-previous slidesjs-navigation"><i class="fa fa-chevron-left" aria-hidden="true"></i></a>
              <a href="#" class="slidesjs-next slidesjs-navigation"><i class="fa fa-chevron-right" aria-hidden="true"></i></a>
            </div>
          </div>
        </div>
    </div>
  </div>
</div>
</div>
</div>
-->
  <!-- Footer text -->
  <div id="footer">
    <div class="container">
      <p class="footer-text">
        <a href="https://cr0w.pw">Cr0w</a> & <a href="https://vk.com/onescript">OneScript</a> © 2017
      </p>
    </div>
  </div>
  <script src="bootstrap/js/bootstrap.min.js"></script>
  <!-- SlidesJS Required: Link to jquery.slides.js -->
  <script src="js/slides/jquery.slides.min.js"></script>
  <!-- End SlidesJS Required -->

  <!-- SlidesJS Required: Initialize SlidesJS with a jQuery doc ready -->
  <script>
    $(function() {
      $('#slides').slidesjs({
        width: 1080,
        height: 1330,
        navigation: {
          effect: "fade"
        },
        pagination: {
          effect: "fade"
        },
        effect: {
          fade: {
            speed: 400
          }
        }
      });
    });
  </script>
  <!-- End SlidesJS Required -->
  <script>
  $(document).ready(function(){

  $("#showHideContent").click(function () {
  if ($("#slideBlock").is(":hidden"))
  {
    $('#slideBlock').show("slow");
    $('#slide').show("slow");
    $('#showHideContent').attr('style','border-radius: 0px 0px 5px 5px;background-color:#5b8bde;margin-top:-15px;');
    $('#nameScreensButton').text('Скрыть');
  }
  else
  {
    $('#slideBlock').hide("slow");
    $('#showHideContent').attr('style','border-radius: 5px 5px 5px 5px;background-color:#5b8bde;');
    $('#nameScreensButton').text('Показать скриншоты');
  }
  return false;
    });
  });
  </script>
  <script>
  $(document).ready(function(){
      $("#regButtonA").click(function(){
          $("#reg_Modal").modal();
      });
  });
  </script>
  <script>
  $(document).ready(function(){
      $("#logButtonA").click(function(){
          $("#log_Modal").modal();
      });
  });
  </script>
  <script>
  $(document).ready(function(){
      $("#lPassButtonA").click(function(){
          $("#lPass_Modal").modal();
      });
  });
  </script>
  <script>
     // script for post query

     $("#regButt").click(function(){
       if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test($("#reg_Email").val())) {var validmail = true; }
       else{ var validmail = false;}

       if ($("#reg_Login").val()!=""){ var validLogin = true; }
       else { var validLogin = false; }

       if ($("#reg_Password").val()!=""){  var validPassword= true;}
       else {var validPassword = false; }

       if (validmail==true && validLogin == true && validPassword == true)
       {
          $.post("index.php",{ ApiName: "RegistrationSite",username : $("#reg_Login").val(), password : $("#reg_Password").val(), email : $("#reg_Email").val()},onAjaxSuccess);
       }
       else { alert("Заполните все поля");}
     //var login = $("#reg_Login").val();

     //alert(login);
  });



     $("#loginBtn").click(function(){
        if ($("#authlogin").val()!="" && $("#authpass").val()!="")
        {
          $.post("index.php",{ ApiName: "AuthenthicSite",username : $("#authlogin").val() , password : $("#authpass").val()},onAjaxSuccess);
        }
        else{alert("Заполните все поля"); }
     });


     $("#exitButton").click(function(){
     	$.post("index.php",{ApiName: "exitSite"},onAjaxSuccess);
     });


     $("#lPassButton").click(function()
     {
      if(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test($("#lp_Email").val()))
      {
        $.post("index.php",{ ApiName: "SendSecretKey", Email : $("#lp_Email").val()},onSecretKeySend);
      }
      else
      {
        alert("Введите корректный Email");
      }
     });
     $("#reSend").click(function()
     {
      if(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test($("#lp_Email").val()))
      {
        $.post("index.php",{ ApiName: "SendSecretKey", Email : $("#lp_Email").val()},onSecretKeySend);
      }
      else
      {
        alert("Введите корректный Email");
      }
     });

     //script for popups
      $('a.show_popup').click(function () {
          $('div.'+$(this).attr("rel")).fadeIn(500);
          $("body").append("<div id='overlay'></div>");
          $('#overlay').show().css({'filter' : 'alpha(opacity=80)'});
          return false;
      });
      $('a.close').click(function () {
          $(this).parent().fadeOut(100);
          $('#overlay').remove('#overlay');
          return false;
      });

      $('#RecovPassButton').click(function()
      {
        alert("лошарище");
      });

  function onSecretKeySend(data)
  {
    if (data=="OK")
    {
      $('#lPassButton').unbind('click');
      $('#lPassButton').on('click',function(){
          $.post("index.php",{ ApiName: "ResetPassword",SecretKey: $('#lp_sKey').val()},onChangePass);
      });
      $('#lPassButton').text('Отправить');
      alert("Код отправлен на Email. Ожидайте письмо с кодом в течении 5-10 минут.");
      $('#secKeyForm').attr('style','display:block;');
      $('#reSend').attr('style','display:block;float:left;');
        /* Timer here */
        /*
        var seconds = 300;
        var timerID = setInterval(function()
        {
          function ad0 (x)
            {
                return ((x<10) ? '0' : '')+ x
            }
          var date = new Date(0, 0, 0, 0, 0, seconds); with(date)
          $("#timerLP").text([ad0(getMinutes()),ad0(getSeconds())].join(':'));
          seconds--;
          timer_is_on=1;
          if (seconds > 0)
          {
            do {
              clearTimeout(timerID);
                  timerID--;
              } while (timerID > 0);
          }
        },1000);
        */
    }
    else
    {
        $('.lp_sKey').remove();
        $('.timerLP').remove();
        alert(data);
    }
  }

  function onAjaxSuccess(data)
  {
    if (data=="OK") { location.assign("https://cr0w.pw/");}
    else{alert(data);}
  }

  function onChangePass(data)
  {
    if (data=="OK") {alert("Ваш новый пароль отправлен на почту.");location.assign("https://cr0w.pw/"); }
    else{alert(data);}
  }
  </script>
</body>
</html>
